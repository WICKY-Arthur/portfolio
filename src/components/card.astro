---
interface Props {
    id: string;
    title: string;
    type: string;
    cover: string;
}

const { id, title, type, cover } = Astro.props;
---

<a
    href={`/projets/${id}`}
    class="group relative block w-full md:w-[430px] h-full md:h-[430px] max-w-[500px] max-h-[500px] md:max-w-none md:max-h-none overflow-hidden cursor-pointer project-card"
    style="touch-action: manipulation;"
>
    <!-- Image de fond -->
    <div class="absolute inset-0 pointer-events-none">
        <img
            src={cover}
            alt={title}
            class="w-full h-full object-cover transition-transform duration-500 md:group-hover:scale-105"
        />
    </div>

    <!-- Overlay avec opacitÃ© (seulement sur desktop) -->
    <div
        class="absolute inset-0 bg-black/30 transition-opacity duration-500 md:group-hover:opacity-0 md:block hidden pointer-events-none"
    >
    </div>

    <!-- Effet vertical au hover (seulement sur desktop) -->
    <div class="reveal-effect pointer-events-none"></div>

    <!-- Contenu de la card -->
    <div
        class="absolute inset-0 p-6 md:p-8 flex flex-col justify-between z-10 pointer-events-none"
    >
        <!-- Type en haut -->
        <div>
            <span
                class="inline-block text-white text-xs md:text-sm font-semibold px-3 md:px-4 py-1 md:py-1.5 bg-transparent border border-white/30 rounded-full"
                style="font-family: 'Satoshi', sans-serif;"
            >
                {type}
            </span>
        </div>

        <!-- Titre en bas -->
        <div>
            <h3
                class="text-gray-200 text-xl md:text-2xl leading-tight font-semibold"
                style="font-family: 'Satoshi', sans-serif;"
            >
                {title}
            </h3>
        </div>
    </div>
</a>

<style>
    .project-card {
        position: relative;
        aspect-ratio: 1 / 1;
    }

    .reveal-effect {
        position: absolute;
        inset: 0;
        background: transparent;
        opacity: 0;
        z-index: 5;
        pointer-events: none;
    }

    /* Effet hover seulement sur desktop */
    @media (min-width: 768px) {
        .project-card:hover .reveal-effect {
            animation: revealVertical 0.6s ease-out forwards;
        }
    }

    @keyframes revealVertical {
        0% {
            clip-path: inset(50% 0 50% 0);
            opacity: 1;
        }
        100% {
            clip-path: inset(0% 0 0% 0);
            opacity: 0;
        }
    }
</style>
